@page "/admin/classes"

@model FunFox.Pages.Admin.Course.ViewClassesModel


@if(!string.IsNullOrWhiteSpace(Model.Message))
{
    <h3 style="color: green; text-align: center; margin-bottom: 40px">@Model.Message</h3>
}

<div style="display: flex; justify-content: flex-end; padding: 18px">
    <a href="/admin/class/add" class="btn btn-primary">Add</a>
</div>

<div>
    <table class="table table-striped">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Title</th>
                <th scope="col">Class Size</th>
                <th scope="col">Student Count</th>
                <th scope="col">Created By</th>
                <th scope="col">Created At</th>
                <th scope="col">Action</th>
            </tr>
        </thead>
        <tbody>
            @if (Model.PageableResponse != null && Model.PageableResponse.Records.Any())
            {
                 @foreach(var record in Model.PageableResponse.Records)
                 {
                     <tr>
                         <th scope="row">@record.Id</th>
                         <td>@record.Title</td>
                         <td>@record.ClassSize</td>
                         <td>@record.StudentCount</td>
                        <td>@record.CreatedBy</td>
                        <td>@record.CreatedAt.ToString("F")</td>
                        <td>
                            <div style="display: flex; gap: 10px">
                                <a href="/admin/class/edit/@record.Id">
                                    <i class="fa-solid fa-pen-to-square"></i>
                                </a>
                                <form action="/class/delete/@record.Id" method="post" id="deleteForm-@record.Id">
                                    <button type="submit" onclick='return DeleteClass(@record.Id);' class="deleteCode" style="background-color: transparent; border: none;">
                                        <i class="fa-solid fa-trash"></i>
                                    </button>
                                </form>
                            </div>
                        </td>
                     </tr>
                 }
            }
            else
            {
                <tr>
                    <td colspan="5" style="text-align: center">No Record Found</td>
                </tr>
            }
        </tbody>
    </table>
</div>


@section Scripts
{
    <script>

        function DeleteClass(id) {

            $.jAlert({
                'title': 'Are you sure you want to delete this class',
                'content': 'Are you sure you want to delete this class',
                'btns': [
                    { 'text': 'Yes', 'closeAlert': true, 'onClick': function () { $(`#deleteForm-${id}`).submit(); } },
                    { 'text': 'No', 'closeAlert': true, 'onClick': function () { } }
                ]
            });

            return false;
        }
    </script>
}
